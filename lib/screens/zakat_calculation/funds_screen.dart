import 'package:flutter/gestures.dart';import 'package:flutter/material.dart';import 'package:flutter_zakot/core/widgets/snacbar.dart';import 'package:flutter_zakot/screens/zakat_calculation/model/zakot_type.dart';import 'package:flutter_zakot/screens/zakat_calculation/model/zakot_type_enum.dart';import 'package:flutter_zakot/screens/zakat_calculation/widgets/text_field.dart';import 'package:flutter_zakot/widgets/text_button.dart';class FundsScreen extends StatefulWidget {  const FundsScreen(this.zakotList, {super.key});  final List<ZakotType> zakotList;  @override  State<FundsScreen> createState() => _FundsScreenState();}class _FundsScreenState extends State<FundsScreen> {  final _naqdPullarController = TextEditingController();  final _plastikPullarController = TextEditingController();  final _joriyOmonatlarController = TextEditingController();  final _jamgarmaPullarController = TextEditingController();  double? jami;  void calculate() {    final naqdPullar = double.tryParse(_naqdPullarController.text) ?? 0;    final plastikPullar = double.tryParse(_plastikPullarController.text) ?? 0;    final joriyOmonatlar = double.tryParse(_joriyOmonatlarController.text) ?? 0;    final jamgarmaPullar = double.tryParse(_jamgarmaPullarController.text) ?? 0;    setState(() {      jami = naqdPullar + plastikPullar + joriyOmonatlar + jamgarmaPullar;    });  }  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(title: const Text("Pul mablag'lari - shaxsiy")),      body: body(context),    );  }  Container body(BuildContext context) {    return Container(      padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 20),      child: SingleChildScrollView(        dragStartBehavior: DragStartBehavior.down,        child: Column(          children: [            const Text(              ' Naqd pul, plastik kartadagi, joriy va jamg‘arma omonatlardagi barcha pul mablag‘laringiz miqdorini kiriting. Zakot hisoblash kunida barcha valyutadagi pul mablag‘larini tanlangan valyutada kiriting. \n\n'              ' Eʼtibor bering: Bank omonatlarini kiritishda faqat omonatning asosiy miqdorini kiriting, hisoblangan foizlar kiritilmaydi.',              style: TextStyle(fontSize: 15),            ),            const SizedBox(height: 20),            CustomTextField(              helperText: 'Naqd pullar',              controller: _naqdPullarController,              onChanged: (String? value) => calculate(),            ),            const SizedBox(height: 20),            CustomTextField(              helperText: 'Plastik kartadagi pullar',              controller: _plastikPullarController,              onChanged: (String? value) => calculate(),            ),            const SizedBox(height: 20),            CustomTextField(              helperText: 'Joriy omonatlar',              controller: _joriyOmonatlarController,              onChanged: (String? value) => calculate(),            ),            const SizedBox(height: 20),            CustomTextField(              helperText: 'Jamg‘arma va boshqa omonatlar',              controller: _jamgarmaPullarController,              onChanged: (String? value) => calculate(),            ),            const SizedBox(height: 20),            const Text('Jami miqdor:', style: TextStyle(fontSize: 18)),            Text("${jami ?? 0} so'm", style: const TextStyle(fontWeight: FontWeight.bold, fontSize: 28)),            const SizedBox(height: 20),            Row(              children: [                CustomTextButton(title: 'Ortga', onPressed: () => Navigator.pop(context), color: Colors.red),                const SizedBox(width: 20),                CustomTextButton(                  title: 'Davom etish',                  onPressed: () {                    final index = widget.zakotList.indexOf(                      widget.zakotList.where((element) {                        return element.screen == ZakotTypeEnum.fundsScreen;                      }).first,                    );                    if (widget.zakotList.length == (index + 1)) {                      CustomWidgets.showSnackBar(context, 'Oxirgi page chiqishi kere');                    } else {                      Navigator.push(                        context,                        MaterialPageRoute<dynamic>(                          builder: (context) => widget.zakotList[index + 1].screen.getScreen(widget.zakotList),                        ),                      );                    }                  },                  color: Colors.green,                ),              ],            ),          ],        ),      ),    );  }}